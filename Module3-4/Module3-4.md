* **다음 지시를 그대로 구현하라. 너는 표준 라이브러리만 쓰는 Python 3.11 시니어 엔지니어다. `module_3_4` 패키지를 생성하고, 3-1(세그멘터)와 3-2(온톨로지·정의어), 3-3(룰 로더)와 충돌하지 않도록 오직 3-2가 산출한 `NormClause` 리스트(필드 예: `id, index_path, text, normalized_text, title, tags, category, subcategory, canonical_terms, def_bindings`)와 3-3이 산출한 `ruleset_runtime`(컴파일된 키워드/정규식/부정패턴/근접조건/비교식/우선순위/feature\_requirements/실험배정 함수 포함)만을 입력으로 받아 \*\*매칭 결과 `hits`\*\*를 산출하는 실행기를 완성하라. 패키지 구조는 `module_3_4/engine.py`(최상위 실행기), `module_3_4/fastpath.py`(3-4A), `module_3_4/syntax.py`(3-4B), `module_3_4/numeric_table.py`(3-4C), `module_3_4/schemas.py`(데이터 모델: `Hit, Candidate, Evidence` 등), `module_3_4/cli.py`(입력=JSON, 출력=JSON), `tests/test_engine.py`와 최소 샘플을 포함한다. \*\*3-4A 렉시컬 매처(Fast-path)\*\*는 `ruleset_runtime.lexicons`와 경량 정규식을 사용해 `normalized_text`를 1차 스캔한다. 외부 라이브러리 없이 Aho–Corasick 오토마톤을 직접 구현하되(트라이 빌드, 실패 링크, 선형 스캔), 룰셋 단위 캐시를 두고 카테고리 프리필터(`category/subcategory` 일치 조항만 대상)를 적용하여 (rule\_id, clause\_id)별 토큰 적중 수·커버리지·분산을 요약하고 기초 `strength`(0.2\~0.6)를 계산한다. \*\*3-4B 구문/예외 매처(Slow-path)\*\*는 3-3이 제공하는 `syntax_patterns, proximity, negation_terms, exception_cues`를 사용하여 후보에 한해 문장 경계 기준(3-1 노출 경계식 혹은 마침표·개행 휴리스틱)으로 분할한 뒤, 키워드 간 거리 제약과 슬롯 패턴(예: 핵심명사+술어) 충족 여부를 판정하고 “다만/단,” 이후 구간을 예외 영역으로 마킹하며, “…하지 아니한다/제외한다/금지한다” 등의 부정이 핵심 술어와 동일 문장 또는 근접 윈도에 있을 때 매치를 무효화하거나 점수를 큰 폭으로 감점(+0.2\~0.3 가점, 부정 시 0 또는 감점)한다. 3-4C 표/수치·범위 평가기는 `ruleset_runtime.feature_requirements` 또는 규칙의 `requires`에 `numeric_amount, date_range, percentage, table_cells` 등이 있을 때만 조건부 실행하며, 조항 내 표가 문자열로 존재하는 전제에서 간단한 헤더 정규화(상·좌 헤더 페어링, 병합 헤더 분해)와 수치 파싱을 수행하여 “1,000,000원/1백만원/1.0M KRW/월세의 10%/30일 이내/3개월 이상”을 표준 값으로 변환하고, 규칙의 비교식(안전한 JSON 기반 미니 DSL: 예 `{"lhs":"penalty_rate","op":"<=","rhs":{"mul":["rent_monthly",0.1]}}`)을 해석하여 참/거짓을 결정하고 충족 시 `strength`에 \+0.2\~0.3을 부여한다. 최종적으로 `engine.execute(norm_clauses, ruleset_runtime)`는 순서대로 `run_fastpath → run_syntax → run_numeric_table`을 수행하고, 중복 매치나 상충 매치는 3-3의 중재 테이블(구체적 스코프 우선 → priority → most\_conservative)을 적용하여 단일 `hits: List[Hit]`를 반환한다. `Hit`에는 `rule_id, clause_id, match_type{lex|syntax|table|num}, spans[(start,end)], strength∈[0..1], evidence_snippet, notes[]`를 포함하고, 증거는 문장 단위 스니펫 또는 표 셀 좌표(텍스트 인덱스 기반)를 제공한다. 어느 단계에서도 문서 구조를 재파싱하지 말고(3-1 침범 금지), 정의어/동의어를 재구축하지 말며(3-2 침범 금지), 규칙 의미를 변형하지 말라(3-3 침범 금지). 성능 가드레일은 200KB 문서·1,000개 룰·20,000 키워드에서 전체 실행 ≤1.0초(AC 빌드 캐시 후), 피크 메모리 ≤200MB로 두고, 모든 정규식은 미리 컴파일하며 위험한 패턴(과도한 역참조·폭발적 백트래킹)은 거부하라. CLI는 `python -m module_3_4.cli --clauses norm_clauses.json --ruleset ruleset_runtime.json --out hits.json`을 제공하고, 표준입출력 파이프도 지원한다. 테스트는 골든셋 샘플로 ① 렉시컬 후보 축소가 충분히 이뤄지는지, ② “다만/단,” 및 “…하지 아니한다/제외한다”가 오탐을 억제하는지, ③ “위약금 상한 월 차임의 10%”, “통지 30일 이전” 같은 정량 조건을 정확히 평가하는지 검증하며, 스냅샷 테스트로 `hits` 구조와 우선순위 중재 결과의 결정론을 보장하라.**

