* **다음 지시를 그대로 구현하라. 너는 표준 라이브러리만 쓰는 Python 3.11 시니어 엔지니어다. `module_3_6` 패키지를 생성하고, 오직 3-4의 `hits.json`과 3-3의 `ruleset_runtime.json`만 입력으로 받아 3-6A(위험 스코어러)와 3-6B(우선순위·정책 집계기)를 구현하라. 3-6은 문서를 재파싱하지 않고(3-1 침범 금지), 용어 정규화/온톨로지를 재수행하지 않으며(3-2 침범 금지), 규칙 의미를 변경하지 않는다(3-3/3-4 침범 금지). 목표는 경고(WARN)가 90% 이상 발생하도록 임계/정책을 설계·적용하는 것이다. 기본 점수식은 `per_hit = rule.weight * hit.strength * m_variant * m_scope - penalties`, `confidence = clamp(Σ per_hit, 0, 1)`으로 하며, penalties의 기본값은 `{negation:0.25, exception:0.15, conflict_local:0.20, low_evidence:0.10}`(정책 파일로 재정의 가능)로 한다. 리스크 레벨 매핑은 하향 편향 정책을 채택한다: 기본 임계값 HIGH ≥ 0.99, WARN ≥ 0.10(그 외 OK). 이어서 보정(calibration) 모드를 구현하라. 정책에 `calibration` 블록을 두고 `{"enable": true, "target_warn_rate": 0.90, "min_warn": 0.05, "max_warn": 0.85, "demote_high_to_warn": true, "critical_flag": "critical"}`를 기본으로 한다. 집계가 끝난 후 문서 단위로 경고 비율(`warn_rate = WARN/(WARN+HIGH+OK)`)을 계산하고, 이분 탐색으로 WARN 임계값을 `min_warn..max_warn` 범위에서 조정해 \*\*`warn_rate ≥ 0.90`\*\*이 되도록 한다(단조성을 보장하기 위해 조정은 리스크 재매핑 단계에서만 수행). 동시에 `demote_high_to_warn: true`일 때는 룰 메타에 `flags[critical_flag] != true`인 HIGH 결과를 WARN으로 강등한다(3-3이 부여한 `critical` 플래그만 예외). 모호성 규칙은 유지하되(`ambig_gap` 기본 0.08), `AMBIG`는 WARN 통계에서 제외한다. \*\*우선순위·정책 집계(3-6B)\*\*는 3-3의 `mediation_table`과 전역 규칙(구체적 스코프 우선 → priority → most\_conservative)을 그대로 적용한다. 출력은 `ScoreResult{clause_id, confidence, risk_flag, reasons[], adopted_rules[], suppressed_rules[], per_hit_scores[]}`의 리스트와, 파일 최상단 `summary`에 `{warn_rate, high_rate, ok_rate, ambig_rate, thresholds_applied:{HIGH, WARN}}`를 포함한다. 패키지 구조는 `module_3_6/risk_scorer.py`(3-6A), `module_3_6/aggregator.py`(3-6B), `module_3_6/calibrator.py`(WARN 임계 조정/강등 로직), `module_3_6/schemas.py`(데이터 모델), `module_3_6/cli.py`(입출력), `tests/test_scoring.py`(정책/보정/강등 테스트), `samples/{hits.json,ruleset_runtime.json,policy.json}`로 구성한다. CLI는 `python -m module_3_6.cli --hits hits.json --rules ruleset_runtime.json --out scores.json --policy policy.json`을 제공하되, `policy.json`이 없으면 다음 기본 정책을 내장해 사용하라:**  
* **`{"thresholds":{"HIGH":0.99,"WARN":0.10,"ambig_gap":0.08},"penalties":{"negation":0.25,"exception":0.15,"conflict_local":0.20,"low_evidence":0.10},"resolution_order":["scope_specificity","priority","most_conservative"],"calibration":{"enable":true,"target_warn_rate":0.90,"min_warn":0.05,"max_warn":0.85,"demote_high_to_warn":true,"critical_flag":"critical"}}`. 테스트·수락 기준: (1) 샘플 분포에서 `warn_rate ≥ 0.90`이 달성되고 `thresholds.WARN`이 `min_warn..max_warn` 내에서 조정되는가, (2) `critical=true`가 없는 HIGH는 WARN으로 강등되는가(있으면 그대로 HIGH 유지), (3) ambig\_gap 조정 시 동일 입력에 대해 결정론적으로 동일한 결과가 나오는가, (4) 200KB 문서/1천 룰 기준 선형 시간 내(≤300ms, 메모리 ≤150MB)로 동작하는가. 외부 패키지는 금지하며, 어떤 단계에서도 3-1/3-2/3-3/3-4의 역할을 재수행하지 말라.**

